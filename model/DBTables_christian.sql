-- Drop all tables to ensure no errors;

DROP TABLE IF EXISTS "USER";
DROP TABLE IF EXISTS "PLAN";
DROP TABLE IF EXISTS "PROPERTY";
DROP TABLE IF EXISTS "PROP_AMORT";
DROP TABLE IF EXISTS "PLAN_AMORT";

-- User table is to contain multiple plans

CREATE TABLE "USER" (
	U_ID VARCHAR(50) NOT NULL,
	U_ID_CREATED DATE NOT NULL DEFAULT NOW(),
	U_PASSWORD VARCHAR(50) NOT NULL,

	-- EXTRAS
	CUSTOM1 VARCHAR(50),
	CUSTOM2 VARCHAR(50),
	CUSTOM3 VARCHAR(50),
	CUSTOM4 VARCHAR(50),
	CUSTOM5 VARCHAR(50),
	CUSTOM6 VARCHAR(50),
	CUSTOM7 VARCHAR(50),
	CUSTOM8 VARCHAR(50),
	CUSTOM9 VARCHAR(50),
	CUSTOM0 VARCHAR(50),

	PRIMARY KEY (U_ID)
);

-- Plan table is to contain multiple properties

CREATE TABLE "PLAN" (
	-- APP DATA
	PL_ID VARCHAR(50) NOT NULL, -- User Created Plan ID 
	PL_ID_CREATED DATE NOT NULL DEFAULT NOW(),
	U_ID VARCHAR(50) NOT NULL,

	-- PLAN DATA
	PLAN_LENGTH_YEAR VARCHAR(50),
	PLAN_LENGTH_MONTH VARCHAR(50),
	PLAN_LENGTH_DAY VARCHAR(50),
	PLAN_INITIAL_CASH VARCHAR(50),
	PLAN_INITIAL_INVEST VARCHAR(50),
	SALARY_YEAR VARCHAR(50),
	BONUS_PERC_SALARY_YEAR VARCHAR(50),
	BONUS_FREQ_YEAR VARCHAR(50),
	MARKET_RATE_YEAR VARCHAR(50),
	INCOME_TAX_RATE_YEAR VARCHAR(50),
	DONATIONS_PERC_SALARY_YEAR VARCHAR(50),
	DONATIONS_FREQ_YEAR VARCHAR(50),
	INFLATION_RATE_YEAR VARCHAR(50),

	-- MIGHT NOT USE
	CASH_ON_HAND VARCHAR(50),
	SAVE_ABOVE_CASH_ON_HAND VARCHAR(50),

	-- EXTRAS
	CUSTOM1 VARCHAR(50),
	CUSTOM2 VARCHAR(50),
	CUSTOM3 VARCHAR(50),
	CUSTOM4 VARCHAR(50),
	CUSTOM5 VARCHAR(50),
	CUSTOM6 VARCHAR(50),
	CUSTOM7 VARCHAR(50),
	CUSTOM8 VARCHAR(50),
	CUSTOM9 VARCHAR(50),
	CUSTOM0 VARCHAR(50),

	PRIMARY KEY (PL_ID, U_ID)
);

-- Property table is to contain all information to configure and calculate amortization schedule for a loan

CREATE TABLE "PROPERTY" (
	-- APP DATA
	U_ID VARCHAR(50) NOT NULL,
	PL_ID VARCHAR(50) NOT NULL, -- User Created Plan ID 
	P_ID VARCHAR(50) NOT NULL, -- User Created Property ID 
	P_ID_CREATED DATE NOT NULL DEFAULT NOW(),

	-- LOAN DATA
	PROPERTY_PRICE VARCHAR(50),
	LOAN_DOWNPAY VARCHAR(30),
	LOAN_AMOUNT VARCHAR(50), -- Calculated
	LOAN_START_DATE DATE,
	LOAN_LENGTH_YEAR VARCHAR(50), 
	LOAN_END_DATE DATE, -- Calculated
	LOAN_LENGTH_MONTH VARCHAR(50),  -- Calculated
	LOAN_LENGTH_DAY VARCHAR(50),  -- Calculated
	LOAN_PAY_FREQ_YEAR VARCHAR(50),
	LOAN_INT_RATE_YEAR VARCHAR(30),
	LOAN_LENDER_CRED VARCHAR(50),
	LOAN_ORIG_COSTS VARCHAR(50),
	LOAN_PERIODIC_PAY VARCHAR(50), -- Calculated with equation PeriodicPayment
	
	-- PERIODIC VALUES/COSTS
	RENT_YES_NO VARCHAR(50),
	OWN_YES_NO VARCHAR(50),
	RENT_START_DATE VARCHAR(50),
	RENT_END_DATE VARCHAR(50),
	RENT_FREQ_YEAR VARCHAR(50),
	RENT_PRICE VARCHAR(50),
	COUNTY_TAX_YEAR VARCHAR(50),
	SCHOOL_TAX_YEAR VARCHAR(50),
	MUD_TAX_YEAR VARCHAR(50),
	HOA_FEES_YEAR VARCHAR(50),
	HOMEOWN_INSURE_YEAR VARCHAR(50),
	FLOOD_INSURE_YEAR VARCHAR(50),
	MORTGAGE_INSURE_YES_NO VARCHAR(50),
	MORTGAGE_INSURE_RATE_YEAR VARCHAR(50),
	TITLE_INSURE_YES_NO VARCHAR(50),
	TITLE_INSURE_YEAR VARCHAR(50),
	HOMESTEAD_EXEMPT_YES_NO VARCHAR(50),
	HOMESTEAD_EXEMPT_YEAR VARCHAR(50),
	HOME_APPREC_RATE_YEAR VARCHAR(50),
	SECURITY_SYSTEM_YES_NO VARCHAR(50),
	SECURITY_SYSTEM_START_DATE VARCHAR(50),
	SECURITY_SYSTEM_END_DATE VARCHAR(50),
	SECURITY_SYSTEM_FREQ_YEAR VARCHAR(50),
	SECURITY_SYSTEM_PRICE VARCHAR(50),
	LANDSCAPE_YES_NO VARCHAR(50),
	LANDSCAPE_START_DATE VARCHAR(50),
	LANDSCAPE_END_DATE VARCHAR(50),
	LANDSCAPE_FREQ_YEAR VARCHAR(50),
	LANDSCAPE_PRICE VARCHAR(50),
	BUG_YES_NO VARCHAR(50),
	BUG_START_DATE VARCHAR(50),
	BUG_END_DATE VARCHAR(50),
	BUG_FREQ_YEAR VARCHAR(50),
	BUG_PRICE VARCHAR(50),
	SOLAR_YES_NO VARCHAR(50),
	SOLAR_START_DATE VARCHAR(50),
	SOLAR_END_DATE VARCHAR(50),
	SOLAR_FREQ_YEAR VARCHAR(50),
	SOLAR_PRICE VARCHAR(50),
	SOLAR_SAVINGS VARCHAR(50),
	PROPERTY_MAN_YES_NO VARCHAR(50),
	PROPERTY_MAN_START_DATE VARCHAR(50),
	PROPERTY_END_DATE VARCHAR(50),
	PROPERTY_MAN_FREQ_YEAR VARCHAR(50),
	PROPERTY_MAN_PRICE VARCHAR(50),
	HOME_AVG_ENERGY_FREQ_YEAR VARCHAR(50),
	HOME_AVG_ENERGY_PRICE VARCHAR(50),
	ESCROW_YES_NO VARCHAR(50),
	
	-- EXTRA AND 1-TIME COSTS
	INSPECTION_FEES VARCHAR(50),
	HOME_WARRANTIES VARCHAR(50),
	TITLE_CO_CLOSING_COSTS VARCHAR(50),
	REALTOR_BUY_FEE_RATE VARCHAR(50),
	REALTOR_SELL_FEE_RATE VARCHAR(50),
	REALTOR_FEES_PERIODIC VARCHAR(50),

	-- MIGHT NOT USE
	CUSTOM_EXT_PAY_YES_NO VARCHAR(50),
	CUSTOM_EXT_PAY VARCHAR(50),
	FIXED_EXT_PAY_YES_NO VARCHAR(50),
	FIXED_EXT_PAY_FREQ_YEAR VARCHAR(50),
	FIXED_EXT_PAY_PRICE VARCHAR(50),

	-- EXTRAS
	CUSTOM1 VARCHAR(50),
	CUSTOM2 VARCHAR(50),
	CUSTOM3 VARCHAR(50),
	CUSTOM4 VARCHAR(50),
	CUSTOM5 VARCHAR(50),
	CUSTOM6 VARCHAR(50),
	CUSTOM7 VARCHAR(50),
	CUSTOM8 VARCHAR(50),
	CUSTOM9 VARCHAR(50),
	CUSTOM0 VARCHAR(50),
	
	PRIMARY KEY (U_ID, PL_ID, P_ID)
);

-- Prop_amort table is to hold the amortization calculation generated by a configured property

CREATE TABLE "PROP_AMORT" (
	U_ID VARCHAR(50) NOT NULL,
	PL_ID VARCHAR(50) NOT NULL, -- User Created Plan ID 
	P_ID VARCHAR(50) NOT NULL, -- User Created Property ID 
	PRA_TIMESTAMP TIMESTAMP NOT NULL,
	MONEY_AMOUNT VARCHAR(50),
	CONSTRAINT attributes_pk PRIMARY KEY (U_ID, PL_ID, P_ID,PRA_TIMESTAMP)
);

-- Plan_amort table is to hold the amortization calculation of multiple configured properties

CREATE TABLE "PLAN_AMORT" (
	U_ID VARCHAR(50) NOT NULL,
	PL_ID VARCHAR(50) NOT NULL, -- User Created Plan ID 
	P_ID VARCHAR(50) NOT NULL, -- User Created Property ID 
	PLA_TIMESTAMP TIMESTAMP NOT NULL,
	MONEY_AMOUNT VARCHAR(50),
	PRIMARY KEY (U_ID, PL_ID, P_ID, PLA_TIMESTAMP)
);

CREATE TABLE "CUSTOM_PAY" (
	U_ID VARCHAR(50) NOT NULL,
	PL_ID VARCHAR(50) NOT NULL, -- User Created Plan ID 
	P_ID VARCHAR(50) NOT NULL, -- User Created Property ID 
	PA_TIMESTAMP TIMESTAMP NOT NULL,
	MONEY_AMOUNT VARCHAR(50),
	PRIMARY KEY (U_ID, PL_ID, P_ID, PLA_TIMESTAMP)
);
